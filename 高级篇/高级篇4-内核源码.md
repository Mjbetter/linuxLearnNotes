# 内核源码



#### 一、linux0.01内核源码

1. 基本介绍
   - Linux的内核源码可以从网上下载，解压缩后文件一般也都位于linux目录下。内核源代码有很多版本，可以从linux0.01入手，总共的代码1w行左右，最新版本5.9.8总共代码超过700w行，非常庞大。
   - 内核地址-https://www.kernel.org/
2. 阅读技巧
   - 阅读源码前，应知道Linux内核源码的分布情况，现代的操作系统一般由进程管理，内存管理，文件系统，驱动程序和网络等组成。linux内核源码的各个目录大致与此对应。
   - 阅读顺序或方法上，纵向和横线，纵向就是顺着程序的执行顺序逐步进行。横向就是按照模块来看。
   - 对于Linux启动代码可顺着Linux的启动顺序一步步来阅读，对于像内存管理部分，可以单独拿出来进行阅读分析。实际上这是一个反复的过程，不可能一遍就理解。
3. 目录介绍
   - boot目录和系统引导相关
   - fs目录存放linux支持的文件系统代码
   - include存放linux核心需要的头文件，比如asm，linux，sys
   - init存放初始化相关的
   - kernel存放内核相关的
   - lib存放的是库文件，库代码
   - Makefile是模块编译文件
   - mm存放内存管理相关的代码
   - tools工具相关
4. main函数中关键方法的介绍
   - time_init()；初始化运行时间
   - tty_init()；tty初始化
   - trap_init()；陷阱门（硬件中断向量）初始化
   - sched_init()；调度程序初始化
   - buffer_init()；缓冲管理初始化
   - hd_init()；硬盘初始化
   - sti()；所有初始化工作完成以后，开启中断
   - move_to_user_mode()；进入到用户模式

#### 二、linux内核升级

1. yum info kernel -q （检测内核版本，显示可以升级的内核）
2. uname -a（查看当前内核版本）
3. yum update kernel （升级内核）
4. yum list kernel -q （查看已经安装的内核）